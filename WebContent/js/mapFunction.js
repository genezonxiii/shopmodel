//############################################################
//############　　　　　此JS包含　　　　　#############################
//############　1.搜POI 比 type 的　##############################
//############　2.搜POI 比subtype的　############################
//############　3.Menu商圈中畫商圈　###############################
//############　4.Menu中開放資源(2)　##############################
//############　5.Menu中國家(2)　#################################
//############　6.Menu中城市(2)　#################################
//############　7.Menu商圈中熱力圖功能(2)　##########################
//############################################################
//############　皆為畫googlemap相關功能　###########################
//############################################################



var type_to_pngname={'勝博殿':'poi-F-01','日本靜岡勝政豬排':'poi-F-02','斑鳩的窩':'poi-F-03','福勝亭日式豬排專賣':'poi-F-04','銀座杏子日式豬排':'poi-F-05','樹太老':'poi-F-06','品田牧場':'poi-F-07','居食屋「和民」':'poi-F-08','CoCo壹番屋':'poi-F-09','PaPa Egg日式蛋包工房':'poi-F-10','Tamoya太盛16烏龍麵':'poi-F-11','YAYOI':'poi-F-12','大戶屋':'poi-F-13','百八魚場':'poi-F-14','鮮五丼':'poi-F-15','元氣咖哩':'poi-F-16','魔法咖哩':'poi-F-17','其他':'poi-F-18','台灣銀行':'poi-bot','台灣土地銀行':'poi-land','第一銀行':'poi-first','台中商銀':'poi-tcb','華南銀行':'poi-hncb','彰化銀行':'poi-chb','上海商銀':'poi-scsb','富邦銀行':'poi-fubon','高雄銀行':'poi-bok','兆豐銀行':'poi-mega','花旗銀行':'poi-citi','澳盛銀行':'poi-anz','匯豐銀行':'poi-hsbc','瑞興商銀':'poi-bankoftaipei','京城商銀':'poi-ktb','新光銀行':'poi-sk','陽信銀行':'poi-sunny','安泰銀行':'poi-entie','板信銀行':'poi-bop','三信銀行':'poi-cota','聯邦銀行':'poi-ubot','台新銀行':'poi-taishin','元大銀行':'poi-yuanta','郵局':'poi-psot','永豐銀行':'poi-sinopac','凱基銀行':'poi-kgi','玉山銀行':'poi-esun','日盛銀行':'poi-jihsun','渣打銀行':'poi-sc','星展銀行':'poi-dbs','大眾銀行':'poi-tc','中國信託':'poi-ctbc','國泰世華':'poi-cathay','寵物店':'poi-pet-store','動物醫院':'poi-pet-hospital','水族箱':'poi-pet-aquarium','寵物訓練':'poi-pet-training','動物藥品':'poi-pet-drug2','寵物餐廳':'poi-pet-restaurant','寵物鳥園':'poi-pet-bird','寵物塑膠製品':'poi-pet-plastic','寵物工會':'poi-pet-union','寵物飼料':'poi-pet-feed2','寵物飯店旅館':'poi-pet-hotel','寵物納骨塔':'poi-pet-grave','寵物社會團體':'poi-pet-fundation','寵物米':'poi-pet-rice','中國寵物':'poi-china_animal-hospital','大同':'tatung','順發':'sunfar','全國電子':'elifemall','倍適得':'best','燦坤':'tkec','遠傳':'fetnet','中華電信':'cht','台哥大':'taiwanmobile','臺灣之星':'tstartel','亞太':'aptg','聯強':'synnex','全虹':'arcoa','震旦':'aurora','三井3C':'sanjing3c','神腦國際':'senao','星巴克':'starbucks','85度C':'85C','伯朗咖啡':'mrbrown','丹堤咖啡':'dante','怡客咖啡':'ikari','西雅圖咖啡':'barista','壹咖啡':'e-coffee','路易莎':'louisa','CAMA':'CAMA','金礦咖啡':'crownfancy','junior coffee':'JUNIOR','S_D新奢華':'S&D','品皇咖啡':'phcafe','歐克佬咖啡':'oklao','早安美芝城':'macc','美而美':'mam','弘爺漢堡':'hongya','永和豆漿大王':'Yung-Ho-Town','麥味登':'superqin','拉亞漢堡':'laya','jasons':'jasons','全聯福利中心':'pxmart','頂好超市':'wellcome','美聯社':'simplemart','citysuper':'citysuper','松青超市':'matsusei','愛買':'amart','大潤發':'rt-mart','家樂福':'carrefour','COSTCO':'costco','21世紀':'poi-pec21c','必勝客':'poi-pizza','麥當勞':'poi-Mcdonalds','肯德基':'poi-KFC','頂呱呱':'poi-tkkinc','達美樂':'poi-dominos','漢堡王':'poi-burgerking','德克士':'poi-dicos','摩斯':'poi-mos','TOMODS':'poi-tomods','JP日藥本鋪':'poi-jp','日本藥妝堂':'poi-jpdrugs','屈臣氏':'poi-watsons','康是美':'poi-cosmed','連鎖服飾':'poi-clothes','政府機關':'poi-government2','飯店和旅館類':'poi-living','全省觀光景點':'poi-travel','醫學中心':'poi-H-01','區域醫院':'poi-H-02','地區醫院':'poi-H-03','診所':'poi-H-04','藥局':'poi-H-05','居家護理':'poi-H-06','醫事檢驗所':'poi-H-07','康復之家':'poi-H-08','助產所':'poi-H-09','物理治療所':'poi-H-10','醫事放射所':'poi-H-11','丁丁藥局':'poi-M-01','躍獅':'poi-M-02','大樹':'poi-M-03','啄木鳥':'poi-M-04','佑全':'poi-M-05','健康人生':'poi-M-06','博登':'poi-M-07','杏一':'poi-M-08','新光三越':'poi-B-01','SOGO':'poi-B-02','微風':'poi-B-03','遠東百貨':'poi-B-04','漢神':'poi-B-05','夢時代':'poi-B-06','統一阪急百貨':'poi-B-07','統領百貨':'poi-B-08','明曜百貨':'poi-B-09','遠企購物中心':'poi-B-10','大葉高島屋':'poi-B-11','京華城':'poi-B-12','中友':'poi-B-13','美麗華':'poi-B-14','寶麗':'poi-B-15','老虎城':'poi-B-16','廣三SOGO':'poi-B-17','台北101':'poi-B-18','誠品生活':'poi-B-19','京站時尚廣場':'poi-B-20','環球購物中心':'poi-B-21','台茂購物中心':'poi-B-22','大江購物中心':'poi-B-23','耐斯松屋':'poi-B-24','時尚流行館':'poi-B-25','德安百貨':'poi-B-26','大統百貨':'poi-B-27','大立百貨':'poi-B-28','福華名品':'poi-B-29','義大百貨':'poi-B-30','新月廣場':'poi-B-31','友愛百貨':'poi-B-32','慶城街一號':'poi-B-33','欣欣大眾百貨':'poi-B-34','三井奧萊特':'poi-B-35','華泰名品城':'poi-B-36','COCO都可':'poi-D-01','大沏茶':'poi-D-02','鮮茶道':'poi-D-03','歇腳亭':'poi-D-04','紅太陽':'poi-D-05','茶聚':'poi-D-06','色杯子':'poi-D-07','CUP_C+':'poi-D-08','Comebuy':'poi-D-09','50嵐':'poi-D-10','天仁茗茶':'poi-D-11','春水堂':'poi-D-12','水巷查弄':'poi-D-13','茶湯會':'poi-D-14','日出茶太':'poi-D-15','橘子工坊':'poi-D-16','清新福全':'poi-D-17','清玉':'poi-D-18','大苑子':'poi-D-19','WISH先生':'poi-D-20','喫茶小舖':'poi-D-21',
	'超市便利商店' : 'poi-conveniencestore','餐飲店' : 'poi-restaurant','書店文具店' : 'poi-bookstore','藥妝店' : 'poi-pharmacy','購物商場百貨' : 'poi-shoppingmall','3C' : 'poi-3c','服飾業' : 'poi-clothingstore',		
	'寫字樓及大廈' : 'poi-office','政府機構' : 'poi-government','文教機構' : 'poi-education','休閒設施' : 'poi-leisure','娛樂設施' : 'poi-amusement','醫院' : 'poi-hospital','酒店' : 'poi-hotel','銀行' : 'poi-bank','居民社區' : 'poi-community','停車場' : 'poi-park','景點' : 'poi-spot'
}
function select_poi(poi_name){
	if(all_markers[poi_name]!=null){
		for (var i = 0; i < all_markers[poi_name].length; i++) {   
			all_markers[poi_name][i].setMap(null);   
        }   
		all_markers[poi_name]=null;
		return;
	}
	
	$.ajax({
		type : "POST",
		url : "realMap.do",
// 		async : false,
		data : {
			action : "select_poi",
			name : poi_name,
			lat : map.getCenter().lat,
			lng : map.getCenter().lng,
			zoom : map.getZoom()
		},
		success : function(result) {
			//alert(result);
			console.log(result);
			if(result=="fail!!!!!")return;
			var json_obj = $.parseJSON(result);
			var result_table = "";
			all_markers[poi_name]=[];
			
			if(json_obj.length>1000){
				if(confirm("搜尋資料量達"+json_obj.length+"筆\n是否繼續查詢?","確認繼續","取消")){}else{
					return;
			}}
				
			$.each(json_obj,function(i, item) {
				var  icon = json_obj[i].icon.length>3?json_obj[i].icon:false;
// 				alert(type_to_pngname[json_obj[i].type]);
				var marker = new google.maps.Marker({
				    position: json_obj[i].center,
				    title: json_obj[i].name,
				    map: map,
// 				    icon : icon//"./refer_data/poi_icon/dante.png"
				    icon : ("./refer_data/poi_icon/"+(type_to_pngname[json_obj[i].type]==null?"Q2":type_to_pngname[json_obj[i].type])+".png")//"./refer_data/poi_icon/dante.png"
				});
				var infowindow = new google.maps.InfoWindow({content:( "名稱:　"+json_obj[i].name+"<br/>地址:　"+json_obj[i].addr)});
				google.maps.event.addListener(marker, "mouseover", function(event) { 
		        	infowindow.open(marker.get('map'), marker);
		        	setTimeout(function () { infowindow.close(); }, 2000);
		        });
				all_markers[poi_name].push(marker);
			});
		}
	});
}


function select_poi_2(poi_name){
	if(all_markers[poi_name]!=null){
		for (var i = 0; i < all_markers[poi_name].length; i++) {   
			all_markers[poi_name][i].setMap(null);   
        }   
		all_markers[poi_name]=null;
		return;
	}
	
	$.ajax({
		type : "POST",
		url : "realMap.do",
// 		async : false,
		data : {
			action : "select_poi_2",
			name : poi_name,
			lat : map.getCenter().lat,
			lng : map.getCenter().lng,
			zoom : map.getZoom()
		},
		success : function(result) {
			if(result=="fail!!!!!")return;
			var json_obj = $.parseJSON(result);
			var result_table = "";
			all_markers[poi_name]=[];
			if(json_obj.length>1000){
				if(confirm("搜尋資料量達"+json_obj.length+"筆\n是否繼續查詢?","確認繼續","取消")){}else{
					return;
			}}
			
			$.each(json_obj,function(i, item) {
				//alert(json_obj[i].name);
				var  icon = json_obj[i].icon.length>3?json_obj[i].icon:false
				var marker = new google.maps.Marker({
				    position: json_obj[i].center,
				    title: json_obj[i].name,
				    map: map,
//				    icon : icon
				    icon : ("./refer_data/poi_icon/"+(type_to_pngname[json_obj[i].type]==null?"Q2":type_to_pngname[json_obj[i].type])+".png")//"./refer_data/poi_icon/dante.png"
				});
				var infowindow = new google.maps.InfoWindow({content:( "名稱:　"+json_obj[i].name+"<br/>地址:　"+json_obj[i].addr)});
				google.maps.event.addListener(marker, "mouseover", function(event) { 
		        	infowindow.open(marker.get('map'), marker);
		        	setTimeout(function () { infowindow.close(); }, 2000);
		        }); 
				all_markers[poi_name].push(marker);
			});
		}
	});
}


function select_BD(BD_name){
//  	alert(BD_name);
	if(all_BDs[BD_name]!=null){
		for (var i = 0; i < all_BDs[BD_name].length; i++) {   
			all_BDs[BD_name][i].setMap(null);   
        }   
		all_BDs[BD_name]=null;
		return;
	}
	$.ajax({
		type : "POST",
		url : "realMap.do",
		data : {
			action : "select_BD",
			name : BD_name
		},
		success : function(result) {
// 			alert(result);
			var json_obj = $.parseJSON(result);
			var result_table = "";
			all_BDs[BD_name]=[];
			$.each(json_obj,function(i, item) {
				map.panTo(new google.maps.LatLng(json_obj[i].lat,json_obj[i].lng));
// 				map.setZoom(15);
				smoothZoom(map, 15, map.getZoom());
				var bermudaTriangle = new google.maps.Polygon({
					paths: json_obj[i].center,
					strokeColor: '#FF0000',
					strokeOpacity: 0.8,
					strokeWeight: 2,
					fillColor: '#FF0000',
					fillOpacity: 0.1
				});
				bermudaTriangle.setMap(map);
				//bermudaTriangle.setMap(null);
				all_BDs[BD_name].push(bermudaTriangle);
			});
		}
	});
}

//##################################################################
//##################   以下是Menu中開放資源功能   ##########################
//##################################################################
function country_POLY_for_country_economy (year,type){//country_polygen
	//清 country_polygen
	//叫 geom 資料
	//畫 在地圖上
	panTo( 8.0, 112.0);
	smoothZoom(map, 4, map.getZoom());
	var polygen = country_polygen.pop();
	while(polygen != null){
		if (Wkt.isArray(polygen)) {
		       for (i in polygen) {
		           if (polygen.hasOwnProperty(i) && !Wkt.isArray(polygen[i])) {
		           	polygen[i].setMap(null);
		       }
		    }
		} else {
		   	polygen.setMap(null);
		}
		polygen = country_polygen.pop();
	}
	
	
	$.ajax({
		type : "POST",
		url : "countryEconomy.do",
		async : false,
		data : {
			action : "change_select",
			year : year,
			type : type
		},
		success : function(result) {
			var json_obj = $.parseJSON(result);
			$.each(json_obj,function(i, item) {
				//json_obj[i].country_name;
				//json_obj[i].economy_detail_statistic;
				//json_obj[i].geom;
				var wkt = new Wkt.Wkt();
				//var fake = "POLYGON ((121.465 25.0131, 120.646 24.1779, 120.303 22.6228, 121.465 25.0131))";
				//wkt.read(fake);
				//console.log(json_obj[i].geom+" "+i+" "+ json_obj[i].country_name);
				wkt.read(json_obj[i].geom);
	            var config = {
	                fillColor: '#F0F0F0',
	                strokeColor: '#5C5C5C',
	                fillOpacity: 0.7,
	                strokeOpacity: 1,
	                strokeWeight: 1,
	            }
	            var _data = json_obj[i].economy_detail_statistic;
                switch (true) {
                    case _data <= TILE[0]:
                        config.fillColor = "#41A85F";
                        break;
                    case _data > TILE[0] && _data <= TILE[1]:
                        config.fillColor = "#8db444";
                        break;
                    case _data > TILE[1] && _data <= TILE[2]:
                        config.fillColor = "#FAC51C";
                        break;
                    case _data > TILE[2] && _data <= TILE[3]:
                        config.fillColor = "#d87926";
                        break;
                    case _data > TILE[3]:
                        config.fillColor = "#B8312F";
                        break;
                }
	            var polygen = wkt.toObject(config);
	            if (Wkt.isArray(polygen)) {
	                for (i in polygen) {
	                    if (polygen.hasOwnProperty(i) && !Wkt.isArray(polygen[i])) {
	                    	//alert("array "+i+" : "+polygen[i]);
	                    	polygen[i].setMap(map);
	                    }
	                }
	            } else {
	            	//alert(country_polygen);
	            	polygen.setMap(map);
	            }
				
	            country_polygen.push(polygen);
			});
			
			
            $("#shpLegend").show();
            var _height = $('#shpLegend div').height();
            if (_height > 0) {
                $('#shpLegend').height(_height);
            }
		}
    });
}




function country_economy(node,type){//country_economy
	//var type = "GDP";
// 	var _node={};
// 	_node.title="GDP";
	
	if(!node.isSelected()){//刪刪掉 結束
	 	var polygen = country_polygen.pop();
	 	while(polygen != null){
	 		if (Wkt.isArray(polygen)) {
	 		       for (i in polygen) {
	 		           if (polygen.hasOwnProperty(i) && !Wkt.isArray(polygen[i])) {
	 		           	polygen[i].setMap(null);
	 		       }
	 		    }
	 		} else {
	 		   	polygen.setMap(null);
	 		}
	 		polygen = country_polygen.pop();
	 	}
	 	$("#shpLegend").hide();
	 	return;
	}

	if(!$(node.span.childNodes[1]).hasClass('diagrammap')){
		$(node.span.childNodes[1]).addClass('diagrammap');
	}
	var sibling_node = $('#tree').fancytree('getTree').getSelectedNodes();
	sibling_node.forEach(function(sib_node) {
		if($(sib_node.span).length>0){
			if($(sib_node.span.childNodes[1]).hasClass('diagrammap')){
				sib_node.setSelected(false);
			}
		}
	});
	node.setSelected(true);
	//alert($("#tree").fancytree("getTree").getNodeByKey(50072).title);
// 	.visit(function(node){
// 		alert(node+" "+node.title+" "+node.node.key);
// 	});
	$(node.span.childNodes[1]).addClass('loading');
	$('#span_legend').text(node.title);
    $('#tr_year').show();
    $('#ddl_year').empty();
    var ddl_year = document.getElementById('ddl_year');
    var _select = document.createElement('select');
    ddl_year.appendChild(_select);
	
	$.ajax({
		type : "POST",
		url : "countryEconomy.do",
		//async : false,
		data : {
			action : "draw_shpLegend",
			type : type
		},
		success : function(msg) {
			
			if (msg !== undefined) {
                var arrMsg = msg.split('|');

                TILE = arrMsg[0].split(',');
                var MIN = arrMsg[1];
                var MAX = arrMsg[2];
                var UNIT = arrMsg[3];
                var YEAR = arrMsg[4].split(',');

                for (var i = 0; i < YEAR.length; i++) {
                    var option = document.createElement('option');
                    option.value = YEAR[i];
                    option.text = YEAR[i];
                    _select.appendChild(option);
                }
                $('#span_unit').text(UNIT);

                $('#span_level1').text(' ~ ' + TILE[0]);
                for (var i = 0; i < 4; i++) {
                    $('#span_level' + (i + 2)).text(TILE[i] + ' ~ ' + TILE[i + 1]);
                }
                $('#span_level5').text(TILE[3] + ' ~ ');
                country_POLY_for_country_economy(YEAR[0],type);
                _select.addEventListener('change', function () {
                	country_POLY_for_country_economy(_select.value,type);
                });
                $(node.span.childNodes[1]).removeClass('loading');
                //alert("從這裡開始");
    			return;
                
                
//                 $.ajax({
//             		type : "POST",
//             		url : "countryEconomy.do",
//             		async : false,
//             		data : {
//             			action : "change_select",
//             			year : YEAR[0],
//             			type : type
//             		},
//             		success : function(msg) {
            			
//             			alert(msg);
//             		}
//                 });
//                 var geom = "POLYGON ((121.465 25.0131, 120.646 24.1779, 120.303 22.6228, 121.465 25.0131))";
//                 geom="MULTIPOLYGON (((13.091388702726476 -4.63305568677049, 13.077775955396078 -4.6297130587106494, 13.055137634494258 -4.6186118129847387, 13.038055419621969 -4.6044445041105178, 13.018749237087661 -4.585139751498275, 12.913887978047796 -4.4758338927199475, 12.904304504649247 -4.4577784540123844, 12.901248932092585 -4.4370837209369256, 12.897082328986357 -4.4173617359552964, 12.86972141261316 -4.3995838163399981, 12.779047011910109 -4.3889913557663931, 12.765276909301974 -4.393889426955468, 12.742221832671476 -4.4191675188658337, 12.691526413113536 -4.4795842167381466, 12.661249160820148 -4.528889655832927, 12.644304275122238 -4.55715322534104, 12.462776183973745 -4.5922231671654, 12.400832176463837 -4.609445095314868, 12.388470649600833 -4.6340970990018491, 12.395624161126193 -4.6650695802968585, 12.381249428118679 -4.712361335707044, 12.331457138336305 -4.7870841024493416, 12.294998169330086 -4.7894449235443517, 12.266109466678586 -4.7875003815373134, 12.215067863890852 -4.7599310877494645, 12.18638801619403 -4.8272228238741945, 12.179164886350463 -4.8547229768838065, 12.166387557939515 -4.8958339688625188, 12.026130676589503 -5.01499748274756, 12.018471718195315 -5.0398616787734341, 12.045276642203305 -5.0888891221352424, 12.066387176826822 -5.1225004193588006, 12.083610534898298 -5.1463890074467145, 12.130554199616654 -5.2283334732111939, 12.163887023567327 -5.2938890456429135, 12.176109313793859 -5.3233337406595638, 12.228610992003723 -5.4769449230697091, 12.232638359372856 -5.50152826351848, 12.22541522952929 -5.528819560674151, 12.182638167917162 -5.5384726523909649, 12.16208171819676 -5.5813894272802145, 12.152776718071152 -5.6145834921343862, 12.154789924215663 -5.6774311069599435, 12.176109313793859 -5.7141675950584272, 12.214551925530998 -5.7685556408301295, 12.22986030590846 -5.7550702096224313, 12.274581909527569 -5.736667155964426, 12.367221832521579 -5.730556488391187, 12.484998703327562 -5.7252779005546017, 12.526666640952783 -5.7241668700049786, 12.535276412976145 -5.2736120224768115, 12.532220840419484 -5.1158342360611186, 12.572220802747893 -5.0218057634252204, 12.606943130521131 -4.9980564119737778, 12.709512710143485 -4.9074306484056365, 12.712221145289675 -4.8780560492472205, 12.8205547335142 -4.7375001909809953, 12.856665610929269 -4.7151393891714406, 13.042221069446839 -4.6684727669046424, 13.077637672040964 -4.6698613165464735, 13.092638015731893 -4.64611148845438, 13.091388702726476 -4.63305568677049)), ((23.476108551068819 -17.625835418669567, 23.45444107079885 -17.615837097004373, 23.201663971115408 -17.479724884295933, 23.064998626785268 -17.33194732700747, 22.762496948175681 -17.070003509654214, 22.730552672967519 -17.041389465351472, 22.493888854986722 -16.780895232828698, 22.293331146215451 -16.612224579001065, 22.217775344656502 -16.561668396079597, 22.188331603820529 -16.541114807102645, 22.135066985752815 -16.4859027862845, 22.131526946611359 -16.382085800219443, 22.123886108657018 -16.34875297536945, 22.111942291703429 -16.322502136264518, 22.067220688084319 -16.234098434694943, 22.014442444063604 -16.183334350999473, 22.000148773247361 -16.171661376571251, 21.999721526926976 -16.122779846412755, 21.999164581280468 -16.000000000299735, 22.000000000199918 -15.605555534260475, 22.000000000199918 -15.451112746955687, 21.999164581280468 -14.95000076322458, 21.999164581280468 -14.898612976307788, 21.999164581280468 -14.847223281928848, 21.999164581280468 -14.74416732825955, 21.999721526926976 -14.452501296797379, 21.999443054553353 -14.006668090559913, 21.999443054553353 -13.967500686407504, 21.998607635633903 -13.916112899490656, 21.99777603163858 -13.727222442761501, 21.998252868375232 -13.697778701925529, 21.996665954370371 -13.452777862808091, 21.996387481996749 -13.315555572831386, 22.001525879016128 -13.004584312116265, 22.500000000099988 -13.004989623971937, 22.995830536150379 -13.004722595471378, 23.282497406330265 -13.005279541117886, 23.423053741237197 -13.005556106928736, 23.584720611666967 -13.006389617486832, 23.879997252970895 -13.006944656570624, 24.019441604946167 -12.99944496181547, 24.006246566625805 -12.953056335281588, 23.994581222945158 -12.933473586936429, 23.961666107105202 -12.896389007246853, 23.94638633686003 -12.880278587186979, 23.911943435641092 -12.85236167934795, 23.891941070823805 -12.825417518703489, 23.887010574578426 -12.763611793649318, 23.97138595549751 -12.512500762699972, 23.985275268638759 -12.491945267160304, 24.050691604434064 -12.392431259195234, 24.042774200668873 -12.297500610065072, 24.039163589028476 -12.277084350262498, 24.031110763550942 -12.257639885272454, 24.00388717635218 -12.229306220805427, 23.984788894591873 -12.211806296923044, 23.98416519137055 -11.882223129393878, 24.012357711739071 -11.824167251717256, 23.9984703060598 -11.715695381036937, 23.989721298299344 -11.696945190867837, 23.967359543208431 -11.662154198057749, 24.031942367546264 -11.452500343216229, 24.056249618824893 -11.426389694029126, 24.084442138294094 -11.402778625932797, 24.027002334889914 -11.249999999900012, 24.007785796777171 -11.122732162659133, 23.988052367922478 -10.920000076642168, 23.986206054365994 -10.870461464025311, 23.9540252682516 -10.93375110642836, 23.886108398084161 -11.01472282409901, 23.858610153435905 -11.027153968380901, 23.665136336972409 -11.01083374008499, 23.61027526848892 -10.990278243646003, 23.585830688035855 -10.980001449607187, 23.543052673142427 -10.966945647923239, 23.51999664323057 -10.962223053351181, 23.4966659549699 -10.958889007521634, 23.476387024341761 -10.958333969337161, 23.456108092814304 -10.959166526613842, 23.421943664868309 -10.963195800545691, 23.397499084415244 -10.970277786290751, 23.368053436117236 -10.982778548890849, 23.293888091662154 -11.026945114325542, 23.241943359098798 -11.061667442098724, 23.217012405498167 -11.076597214190031, 23.088054656697125 -11.096389770771282, 23.016941070773839 -11.096111297498339, 22.94124603257842 -11.093055724941735, 22.906803131359482 -11.064931869610064, 22.856943130720936 -11.049445151872192, 22.836246490183441 -11.055973052714137, 22.80694198598394 -11.074722289601937, 22.77506828327472 -11.091458320345168, 22.71666336072559 -11.09333419821462, 22.666110992728193 -11.081111907988145, 22.646663666095378 -11.072778701775633, 22.623470306109766 -11.061112403914251, 22.59819221509872 -11.041251182296207, 22.567499160358011 -11.033611297623224, 22.518608092889224 -11.044167518216341, 22.504581451472859 -11.064723014655328, 22.499929428500366 -11.093777656613497, 22.480762481703209 -11.13062572449752, 22.298885345682208 -11.237222671489064, 22.253887176252249 -11.209723472660073, 22.258888244996569 -11.183751105928764, 22.244026183761434 -11.06833457957714, 22.217498779744915 -11.018890380486596, 22.194442748933739 -10.967224121196182, 22.166456222776503 -10.859930991921715, 22.190135955909682 -10.825695991476778, 22.208885192797482 -10.809167861507547, 22.252220154236795 -10.79000091560971, 22.315135955659855 -10.727500915734652, 22.306110382088491 -10.675279617360388, 22.308052063352079 -10.61277961748533, 22.303333282804829 -10.583057403376415, 22.272499084864933 -10.513055801284168, 22.304443359173717 -10.422779083487853, 22.313817977617646 -10.374999999850047, 22.268886565762443 -10.277778625483108, 22.228191375331733 -10.20222282392416, 22.207221984806779 -10.154167175374823, 22.200832367319947 -10.083333969287196, 22.175415038773053 -9.96250057264325, 22.158330917337992 -9.9243068698660863, 22.132080078233059 -9.9019460680565317, 22.061248779607524 -9.8828477862962814, 22.023191451824118 -9.84972286222029, 21.874721527176803 -9.6650009151600784, 21.859443664393666 -9.6423616409769011, 21.850276946723739 -9.6202793124402888, 21.791526794226229 -9.41138935073792, 21.807220458557367 -9.346389770671351, 21.825275421523543 -9.3022232052366576, 21.84138870232681 -9.1541671755746279, 21.835277557213544 -9.0711116792605253, 21.852775573633892 -8.93388938928382, 21.875831604445011 -8.8011112215056073, 21.890274047409434 -8.732223510706433, 21.924442291178821 -8.5841674801450267, 21.934997558490579 -8.5463905330965986, 21.93999862633558 -8.4961128234480157, 21.936527252230974 -8.42097377761769, 21.91385078388663 -8.3898963931040385, 21.903610229828303 -8.3435420990885518, 21.909252167153852 -8.33213233913608, 21.879024505276732 -8.2836122510045129, 21.8588867187471 -8.2001390456803733, 21.836109161208867 -8.1316680906098213, 21.80388641362714 -8.0534725189415326, 21.773330688060867 -8.0234737399210871, 21.75506782522001 -8.00375080075878, 21.749025345143593 -7.9356951714948991, 21.763332367294993 -7.8355560303864422, 21.773746490508188 -7.7734727862400632, 21.816944121873803 -7.654444694966628, 21.825969696344487 -7.6454181672145864, 21.833053588652263 -7.635556221442414, 21.851108550719118 -7.5916671750999853, 21.859720230204516 -7.476944923569306, 21.839996337760851 -7.3677778247867423, 21.812774658024125 -7.3119449614907239, 21.777858734093343 -7.2812509534686569, 21.603054046507111 -7.2822227473818657, 21.208049774077836 -7.283056258839224, 20.548715591351538 -7.2836160661285021, 20.530900955115044 -7.2496533390303171, 20.533470153624762 -7.1805562975350767, 20.546178817898181 -7.1154170032920092, 20.587776183923779 -7.0308341982396314, 20.615970611754392 -6.9727783205630089, 20.629745483467332 -6.91388225576145, 20.331525802673696 -6.9147229195270938, 20.317497253795295 -6.9511113169336909, 20.317913055343297 -6.9713892933811508, 20.311386108682029 -6.9947223666438845, 19.962776184273537 -6.9955558781012428, 19.53894805930554 -6.9966135024111509, 19.502914429157613 -7.1523613930638135, 19.498886108507179 -7.1794452669854536, 19.490137099847345 -7.2869448662125365, 19.490276336483817 -7.3162503245927724, 19.502220153437406 -7.3697228434344311, 19.528261184306245 -7.4350004192339156, 19.530622482041963 -7.4774999617537787, 19.46819305376647 -7.5689587592393082, 19.399303436404523 -7.5727782249350639, 19.375015258847156 -7.5792512896152857, 19.372497558215798 -7.6011114118621208, 19.381385803512046 -7.6197223662941269, 19.401386260867298 -7.6924705509750879, 19.387496948625312 -7.7631950380205694, 19.373470306309628 -7.7906947134902111, 19.361248016083152 -7.8129172328439722, 19.34930229166747 -7.8931951523343855, 19.352359771686167 -7.9143061635984964, 19.358886718347435 -7.9352779391255694, 19.372776031488741 -7.9933338168021351, 19.001663207890772 -7.9994449619154011, 18.79175949080792 -7.9989757541276845, 18.773052215387452 -7.9723615646344683, 18.766115188665083 -7.9379591940615342, 18.526943206463841 -7.9370837211367871, 18.519165039335121 -7.957639694216482, 18.52555465682201 -7.9890279770594361, 18.4033317563555 -8.0091667177697445, 18.329719543522174 -7.99750041990842, 18.196109771748638 -7.9966669084510045, 18.11257171631172 -8.02861976588946, 18.109424590972139 -8.08135986336697, 18.115417480632289 -8.1071071621657325, 18.041385650427458 -8.1077785492406065, 18.0048599247458 -8.1070842744196625, 17.976943969288811 -8.0830574038760687, 17.952774048083882 -8.061528206061837, 17.922222137441736 -8.04666709900738, 17.889719009125031 -8.0423622134453581, 17.756664276435231 -8.0666675563625745, 17.660274506063672 -8.0927791597304122, 17.631109237601265 -8.0980567933862631, 17.555274963668694 -8.0830574038760687, 17.550197600938588 -8.08067703241909, 17.525554657021871 -8.0536117555780038, 17.505275726393734 -8.0033340450301012, 17.438331604320126 -7.8766670223651545, 17.419719695707442 -7.8550004962758635, 17.390693664780827 -7.845833778605936, 17.309444427118649 -7.756111144813417, 17.283607482999003 -7.6794452668855229, 17.186664581005687 -7.5130558009843753, 17.151107788493675 -7.4527778622085066, 17.105552673417208 -7.4222230908229108, 17.095260619681881 -7.3790225987139024, 17.064720153812118 -7.3391675945088082, 16.994581222545435 -7.2973613735285312, 16.943122864029021 -7.1990280153306117, 16.93499755859051 -7.1125001907311685, 16.957914352765215 -7.0676393504755879, 16.969789504681955 -7.0179171565515048, 16.929998398207545 -6.892222881081068, 16.903121948419255 -6.8638892175133037, 16.870969772437093 -6.8575696940860666, 16.8341636660204 -6.7922229766090254, 16.78277587910361 -6.6816673281845738, 16.708053589001963 -6.4672231670155043, 16.68846893319477 -6.4050002095919467, 16.693609237676242 -6.3550004956762791, 16.725223540833781 -6.1974411006262358, 16.715692520393532 -6.16847276660485, 16.685276031463729 -6.13687515216651, 16.606109619163647 -6.0272226335176811, 16.605274200244196 -5.9816675184411565, 16.596109390036361 -5.9216670987575526, 16.579719543422243 -5.9008340832263, 16.514163970990523 -5.8758335113074622, 16.368331908990456 -5.8530559537692284, 16.319721222256646 -5.8522224423118132, 16.215831756230614 -5.8525009155847556, 16.143054962316683 -5.856389045418041, 16.100070953211969 -5.8593730930937227, 15.928333282055348 -5.8613891599816839, 15.812638282430839 -5.8697223661941962, 15.686109543120949 -5.857083797779012, 15.076387405354524 -5.8627786638042494, 14.851110458680751 -5.8725004196585928, 14.758476257173584 -5.878022194068933, 14.712427139101237 -5.8804225925285891, 14.59638786280965 -5.9080562588891894, 14.341665267837868 -5.8933334351898452, 14.242776870556156 -5.8855562213424832, 14.080275535387671 -5.8663892745453268, 13.997499465627868 -5.8486118315707358, 13.973332405166389 -5.8363890647035532, 13.938610076493887 -5.8408336635426963, 13.759721756353997 -5.862500190531307, 13.541040420479078 -5.8647918699488173, 13.513332366695408 -5.8541669843188515, 13.458610534848333 -5.8484725949342646, 13.405276298462468 -5.8544449809510866, 13.244998931855264 -5.8613891599816839, 13.178880691390816 -5.8563299176914825, 13.172583579968318 -5.8638558384761268, 13.125555038134564 -5.8913893698235142, 13.091943740910949 -5.8983340263941386, 13.059304237600543 -5.8784723281353877, 12.979860306208195 -5.88444471325289, 12.95305442801947 -5.8994445803031113, 12.945276259991431 -5.918889045293156, 12.930693626209916 -5.9458336825783249, 12.89166069048855 -5.97611188905239, 12.826526641990995 -6.0069446561709015, 12.79499912251157 -6.0165281295694513, 12.72777652716502 -6.0191669463974335, 12.57999992405729 -6.0361118320953437, 12.527776718220991 -6.0480556490489334, 12.408332824500292 -6.0769453049817912, 12.314443588500865 -6.0975008014207788, 12.305832863196144 -6.0598611835467295, 12.279998778920572 -6.06333351093275, 12.256596564879601 -6.0776391031620278, 12.24624919924122 -6.1036114689940746, 12.263332366495547 -6.1344451902932633, 12.313331603770564 -6.1952781681528677, 12.340831756780176 -6.2227783202632168, 12.362777710323144 -6.25722312894419, 12.461942672516386 -6.4736118312209783, 12.536109924433504 -6.6327781672785591, 12.548887252844509 -6.65500068663232, 12.567638397194344 -6.6705560685077216, 12.598609924308619 -6.6952781680529938, 12.665555000562847 -6.76638936987348, 12.817777633331161 -6.9502782821169831, 12.82833290064292 -6.9905557635376, 12.83305454283294 -7.01944446528978, 12.841943740511283 -7.0872230530014235, 12.869165420248009 -7.2686119075135025, 12.951665878377639 -7.43805599179052, 12.984443664143839 -7.5266675950334161, 13.010276794238735 -7.5933341980147588, 13.072360038385114 -7.7501392363366222, 13.087776184523364 -7.7747230534261007, 13.101259231628262 -7.79200649250555, 13.107776641878559 -7.8027782437209225, 13.116109848091071 -7.8216667172451366, 13.155277252243422 -7.9144449235943171, 13.194721222206681 -8.0091667177697445, 13.199720382589646 -8.0286121369405237, 13.215555191019291 -8.0655555725315935, 13.2591648099081 -8.1658344269172289, 13.319165229591704 -8.2572231294438438, 13.351943969538638 -8.3005561825217455, 13.369869232279314 -8.3292512890157013, 13.391804695230576 -8.3937501904189276, 13.379235267593572 -8.4587507246661744, 13.349582671802921 -8.4675006866073659, 13.351110458081223 -8.5044460296604711, 13.368770599783375 -8.5814228059177253, 13.400277138079502 -8.6307649616336448, 13.407498359561714 -8.6591672893388818, 13.38749885548782 -8.7402782436460029, 13.360277175751094 -8.7683334348400876, 13.278331756705256 -8.781112670713128, 13.227709770389652 -8.8045148847540986, 13.190277100008188 -8.8616123198526111, 13.099721908938989 -8.9577789306530917, 13.055276871130729 -9.0247230527266424, 13.013609885887547 -9.0869455335094926, 13.000555038384391 -9.0547237392091233, 13.007499694955015 -9.0344448085809859, 13.029722213409457 -8.9861125942207991, 13.054998397857844 -8.9558334353646956, 13.070376396553513 -8.942284583966341, 13.088422775490756 -8.9271917342111351, 13.104007720779748 -8.90701293949553, 13.131322860761486 -8.88166523016622, 13.076282501636172 -8.917347907979547, 13.028706550566881 -8.96164321855963, 13.002785682613194 -9.0220155717611874, 12.98458290078031 -9.0812511441249626, 13.116664886275544 -9.3011112214056766, 13.142375945993138 -9.3377075195863313, 13.169998169380051 -9.4086112972735236, 13.22347068822171 -9.61333370168893, 13.222220421035672 -9.6484727860901671, 13.253332138067776 -9.775556564483793, 13.290276527839524 -9.8286113743154147, 13.304720878265982 -9.8518066408637424, 13.32916545871899 -9.9097232819038936, 13.334374428237311 -9.95041751905319, 13.31604099289757 -9.9631948474641945, 13.448610305721104 -10.196666717894686, 13.47972106947185 -10.241111755702889, 13.488321304184865 -10.251104354981976, 13.511387824688427 -10.28208351104513, 13.529721260028168 -10.346529007107961, 13.520832061450506 -10.37458515158346, 13.523193359186223 -10.398056030661223, 13.538887977698039 -10.423749924119647, 13.642499923732544 -10.531389236623909, 13.746386528115806 -10.643056869778661, 13.768332481658774 -10.672848701306464, 13.769582748844812 -10.700347900135455, 13.740554809556841 -10.730278969199048, 13.724513053634553 -10.765486716838438, 13.781944274808495 -10.851388931653844, 13.836040496871476 -10.921597480339415, 13.849443435965838 -10.956111908237915, 13.853610992353481 -11.002917289601214, 13.847776413051065 -11.095556259313867, 13.816283226090036 -11.303090095531445, 13.791526794026367 -11.334029197589359, 13.778888702251834 -11.516944885098326, 13.775276184048721 -11.577222823874195, 13.786457062043837 -11.715764999355201, 13.792881012049122 -11.748756408281565, 13.794443130845877 -11.758890151659102, 13.792082786391518 -11.794723510881283, 13.76416587855249 -11.936112403964216, 13.662498474525023 -12.169724464312537, 13.575971603206995 -12.312361717119529, 13.556665420672687 -12.32305717434906, 13.525277137829676 -12.350694656533108, 13.508054733039558 -12.372222900166662, 13.485832214585059 -12.405555725016654, 13.473332405266319 -12.434722900041777, 13.473749160995055 -12.45666790030333, 13.472498893808961 -12.484028815777208, 13.459158897365285 -12.508607864661201, 13.375832557626495 -12.590001106266016, 13.354443549730092 -12.603472709497908, 13.22999954234507 -12.613056182896457, 13.19805431385555 -12.609583854611174, 13.125276565760942 -12.65555572541632, 12.969999313717381 -12.78444480918057, 12.932429313262219 -12.82680606834532, 12.927083015468838 -12.856667518191387, 12.951110840193166 -12.926668167002276, 12.961874008278926 -12.947987556580415, 12.938331604320126 -12.99416732815962, 12.862499236950271 -13.085835457240535, 12.766665458943805 -13.192501068369552, 12.539999008447523 -13.400278091160942, 12.512706756211855 -13.424375534203477, 12.523054122749613 -13.552918433838613, 12.531951904456889 -13.567934036326676, 12.535970687797032 -13.577639580102471, 12.504582404954078 -13.844446181945671, 12.482846259647204 -13.877291679467362, 12.408609390311142 -13.950555801608914, 12.357776641578823 -14.041389465051736, 12.332221984756814 -14.105001449657152, 12.317290306102791 -14.190000533797559, 12.326249122998661 -14.230556487591798, 12.341595649919384 -14.26000022932709, 12.347776413350857 -14.307500838792635, 12.340415954332855 -14.396945953492889, 12.332221984756814 -14.424167633229672, 12.315832138142696 -14.466112136665743, 12.300554275359559 -14.529167175624593, 12.282220840019818 -14.637500762949799, 12.277776717821325 -14.668055534335394, 12.273610114715098 -14.752362251116949, 12.247499465527937 -14.789445876625848, 12.205275535537567 -14.877779006595858, 12.159166336457304 -14.98861122173048, 12.106109619163647 -15.114168167127161, 12.057498931530517 -15.218334198064724, 12.030277251793791 -15.401945114575312, 12.030832290877584 -15.428334236136038, 12.036040306215227 -15.463958740403484, 12.034026145889982 -15.495278358209646, 12.014999389909974 -15.569444655946086, 12.00597095469584 -15.596529006508376, 11.890831947436482 -15.755139351100127, 11.857498169305131 -15.787918091047004, 11.827638626021837 -15.799584388908386, 11.811665535136399 -15.779236793243342, 11.773470878178557 -15.783680915441835, 11.741388320514602 -15.819723129618694, 11.731248855650222 -15.850695610014327, 11.741249084777508 -15.878751754489826, 11.771387100434367 -15.924306869566351, 11.802915573195207 -15.967918395917195, 11.810276985494511 -16.000280380135393, 11.805555343304491 -16.02458572395193, 11.791388511970297 -16.052780151782542, 11.781526565298805 -16.08916854828982, 11.786388397406654 -16.196113586872514, 11.794166564535374 -16.241947174322604, 11.807498932030114 -16.34750366236409, 11.810276031313833 -16.370555877351819, 11.815553664969684 -16.423336028834626, 11.817777633531023 -16.447223663641125, 11.819721222256646 -16.471668243194813, 11.820833206087627 -16.503055572756409, 11.822221755729515 -16.672779083587784, 11.821109771898477 -16.702503204259415, 11.81249809241308 -16.791389464951806, 11.773193359086292 -16.826530456815078, 11.771944046080932 -16.965835571254559, 11.758333206212569 -17.139446258637861, 11.752782821669939 -17.254833221575893, 11.811665535136399 -17.270278930228415, 11.884582519867422 -17.22444725024036, 11.902221679486956 -17.205833435064903, 11.933053969964817 -17.180696487253044, 11.976110458131188 -17.164169311464491, 12.048053741487024 -17.143890380836353, 12.087776183823848 -17.136529922717727, 12.205831527902717 -17.194725037030764, 12.238054275484501 -17.215278625108397, 12.292221069147047 -17.22972488389621, 12.434165954595187 -17.21277999909762, 12.478887558214296 -17.2416687008498, 12.557220459056964 -17.243335723764574, 12.604442596148942 -17.225833892420155, 12.817915916686275 -17.107084274419663, 12.851387023992004 -17.07250213656431, 12.879790305877975 -17.040140152346112, 12.923332213910612 -17.016391754176084, 12.98583221468499 -16.991111755702946, 13.018471717995453 -16.978057861481091, 13.149166107130213 -16.954170226674592, 13.170901298256354 -16.95631980871218, 13.208887100259517 -16.973613739282598, 13.260831832822873 -16.984863281415244, 13.317777633231231 -16.978057861481091, 13.346309662061287 -16.970668792330855, 13.376040458400496 -16.970905304136409, 13.472082138080282 -17.010835647247291, 13.494304656534723 -17.025556564383919, 13.528018951313584 -17.087570190212091, 13.660693168255136 -17.218891144210886, 13.697776794663412 -17.241390228476234, 13.841388702126949 -17.323612213332922, 13.928888320639544 -17.401111602718231, 13.993219375274009 -17.423946380520988, 14.016665458244347 -17.410903931071516, 14.051109313643963 -17.419445038058029, 14.082916259677688 -17.430002212831823, 14.171387672103435 -17.421113967535518, 14.19472122200682 -17.41139030421914, 14.218053817729526 -17.386947632127487, 14.36166572609244 -17.387222290476302, 14.44805526733677 -17.387500762849868, 14.634721756403962 -17.388336181769319, 14.993888854686929 -17.389724731411206, 15.49694442714366 -17.389446258138264, 15.583054542733009 -17.389167785764641, 15.95666503906034 -17.386669158854545, 16.00333023050581 -17.386669158854545, 16.606109619163647 -17.390834808679415, 17.278831482187229 -17.392223358321303, 17.51055526751162 -17.39194488504836, 17.561664581155526 -17.390834808679415, 17.733886718896997 -17.388889312491756, 18.00054931679756 -17.386169433472503, 18.117221832721441 -17.386947632127487, 18.188888549367107 -17.387222290476302, 18.389999389760078 -17.386947632127487, 18.45153808631369 -17.389835357915388, 18.513332366595478 -17.472778320263217, 18.578330993380689 -17.572223663191437, 18.641941070524013 -17.648056030561293, 18.753677367816294 -17.745279312390323, 18.804304123236761 -17.768890380486653, 18.91944313049612 -17.816389084288744, 18.983886719096859 -17.825973510968709, 19.025833129995021 -17.83000183071988, 19.055831909015467 -17.827777862158541, 19.116802215150187 -17.819446563408121, 19.133609771673662 -17.804376602298305, 19.175277710198202 -17.8011131289677, 19.245553970639264 -17.806251525987079, 19.298748016208037 -17.825000762874879, 19.337219238077409 -17.843891143861129, 19.413330077820888 -17.861114501932661, 19.445831298675557 -17.862781524847435, 19.559165954745083 -17.867500305394742, 19.701385497642661 -17.870555877951347, 19.797914504650691 -17.863752365479229, 19.818609237726207 -17.858057021913964, 19.920555115026559 -17.857223510456606, 19.946247101022948 -17.863334655569872, 19.97131729126005 -17.880140304631311, 20.016941070474047 -17.890834808579484, 20.098888396981977 -17.896389007146922, 20.128887176901742 -17.894447326782654, 20.244720458982044 -17.880140304631311, 20.270832061450506 -17.861251831107097, 20.321317672772409 -17.857223510456606, 20.445203781229566 -17.901876449938186, 20.492553711084952 -17.941890716883051, 20.553678512653278 -17.983057021664195, 20.595554351951819 -17.981391907110776, 20.638469696019683 -17.97847366372855, 20.751941681263645 -17.996112823348085, 20.781585693025363 -18.010204314877171, 20.854164123475584 -18.016391753976222, 20.889720916886859 -17.994445800433311, 20.953330994030182 -17.968265533827264, 21.021385192472678 -17.9533348084546, 21.138610840018316 -17.934448242392421, 21.165866851374119 -17.931467056359509, 21.236873626616614 -17.938890457128821, 21.263330459932831 -17.956392288473296, 21.37935638399 -18.014888763805345, 21.755405426219511 -17.947345733718578, 22.290275573658846 -17.850002288974395, 22.564163207965748 -17.798889160406361, 22.881107330439022 -17.739444733087907, 22.90999984711533 -17.733333587974641, 22.996387481796887 -17.716945647923239, 23.284721374891603 -17.662502288449787, 23.289165497090096 -17.661113738807956, 23.476108551068819 -17.625835418669567)))";
//                 var wkt = new Wkt.Wkt();
//                 wkt.read(geom);
//                 var config = {
//                     fillColor: '#41A85F',//'#F0F0F0',
//                     strokeColor: '#5C5C5C',
//                     fillOpacity: 0.7,
//                     strokeOpacity: 1,
//                     strokeWeight: 1,
//                 }
                
//                 country_polygen = wkt.toObject(config);
//                 if (Wkt.isArray(country_polygen)) {
//                     for (i in country_polygen) {
//                         if (country_polygen.hasOwnProperty(i) && !Wkt.isArray(country_polygen[i])) {
//                         	alert("array "+i+" : "+country_polygen[i]);
//                         	country_polygen[i].setMap(map);
//                         }
//                     }
//                 } else {
//                 	alert(country_polygen);
//                 	country_polygen.setMap(map);
//                 }
//                 $("#shpLegend").show();
//                 var _height = $('#shpLegend div').height();
//                 if (_height > 0) {
//                     $('#shpLegend').height(_height);
//                 }
                
                
//                 _select.addEventListener('change', function () {
//                     layer_objs[0].clearMap();
					
//                     $cb.addClass('loading');
					
//                     layer_objs[0] = new country_economy(_node, _layerid, _on, _chk, _z, $cb, _select.value);
//                     layer_objs[0].mapIt(_layerid);
//                 });
                

//                 if (layer_objs[0]) {
//                     layer_objs[0].clearMap();
//                 }
//                 layer_objs[0] = new country_economy(_node, _layerid, _on, _chk, _z, $cb, _select.value);
//                 layer_objs[0].mapIt(_layerid);

//                 mapSet("#sea");//定位至東南亞
    			map.panTo(new google.maps.LatLng(midlat,midlng));
				map.setZoom(12);
                
            }
			
		}
	});
}
//##################################################################
//###################   以下是Menu中國家功能   ############################
//##################################################################
function country_POLY_for_countryData (year,type){//country_polygen
	//清 country_polygen
	//叫 geom 資料
	//畫 在地圖上
	panTo( 28.0, 130.0);
	smoothZoom(map, 2, map.getZoom());
	var polygen = country_polygen.pop();
	while(polygen != null){
		if (Wkt.isArray(polygen)) {
		       for (i in polygen) {
		           if (polygen.hasOwnProperty(i) && !Wkt.isArray(polygen[i])) {
		           	polygen[i].setMap(null);
		       }
		    }
		} else {
		   	polygen.setMap(null);
		}
		polygen = country_polygen.pop();
	}
	
	
	$.ajax({
		type : "POST",
		url : "countryData.do",
		async : false,
		data : {
			action : "change_select",
			year : year,
			type : type
		},
		success : function(result) {
			var json_obj = $.parseJSON(result);
			$.each(json_obj,function(i, item) {
				//json_obj[i].country_name;
				//json_obj[i].economy_detail_statistic;
				//json_obj[i].geom;
				var wkt = new Wkt.Wkt();
				//var fake = "POLYGON ((121.465 25.0131, 120.646 24.1779, 120.303 22.6228, 121.465 25.0131))";
				//wkt.read(fake);
				//console.log(json_obj[i].geom+" "+i+" "+ json_obj[i].country_name);
				wkt.read(json_obj[i].geom);
	            var config = {
	                fillColor: '#F0F0F0',
	                strokeColor: '#5C5C5C',
	                fillOpacity: 0.7,
	                strokeOpacity: 1,
	                strokeWeight: 1,
	            }
	            var _data = json_obj[i].economy_detail_statistic;
                switch (true) {
                    case _data <= TILE[0]:
                        config.fillColor = "#41A85F";
                        break;
                    case _data > TILE[0] && _data <= TILE[1]:
                        config.fillColor = "#8db444";
                        break;
                    case _data > TILE[1] && _data <= TILE[2]:
                        config.fillColor = "#FAC51C";
                        break;
                    case _data > TILE[2] && _data <= TILE[3]:
                        config.fillColor = "#d87926";
                        break;
                    case _data > TILE[3]:
                        config.fillColor = "#B8312F";
                        break;
                }
	            var polygen = wkt.toObject(config);
	            if (Wkt.isArray(polygen)) {
	                for (i in polygen) {
	                    if (polygen.hasOwnProperty(i) && !Wkt.isArray(polygen[i])) {
	                    	//alert("array "+i+" : "+polygen[i]);
	                    	polygen[i].setMap(map);
	                    }
	                }
	            } else {
	            	//alert(country_polygen);
	            	polygen.setMap(map);
	            }
				
	            country_polygen.push(polygen);
			});
			
            $("#shpLegend").show();
            var _height = $('#shpLegend div').height();
            if (_height > 0) {
                $('#shpLegend').height(_height);
            }
		}
    });
}

function countryData(node,type){//country_economy
	if(!node.isSelected()){//刪刪掉 結束
	 	var polygen = country_polygen.pop();
	 	while(polygen != null){
	 		if (Wkt.isArray(polygen)) {
	 		       for (i in polygen) {
	 		           if (polygen.hasOwnProperty(i) && !Wkt.isArray(polygen[i])) {
	 		           	polygen[i].setMap(null);
	 		       }
	 		    }
	 		} else {
	 		   	polygen.setMap(null);
	 		}
	 		polygen = country_polygen.pop();
	 	}
	 	$("#shpLegend").hide();
	 	return;
	}

	if(!$(node.span.childNodes[1]).hasClass('diagrammap')){
		$(node.span.childNodes[1]).addClass('diagrammap');
	}
	var sibling_node = $('#tree').fancytree('getTree').getSelectedNodes();
	sibling_node.forEach(function(sib_node) {
		if($(sib_node.span).length>0){
			if($(sib_node.span.childNodes[1]).hasClass('diagrammap')){
				sib_node.setSelected(false);
			}
		}
	});
	node.setSelected(true);
	$(node.span.childNodes[1]).addClass('loading');
	$('#span_legend').text(node.title);
    $('#tr_year').show();
    $('#ddl_year').empty();
    var ddl_year = document.getElementById('ddl_year');
    var _select = document.createElement('select');
    ddl_year.appendChild(_select);
	
	$.ajax({
		type : "POST",
		url : "countryData.do",
		//async : false,
		data : {
			action : "draw_shpLegend",
			type : type
		},
		success : function(msg) {
			
			if (msg !== undefined) {
                var arrMsg = msg.split('|');

                TILE = arrMsg[0].split(',');
                var MIN = arrMsg[1];
                var MAX = arrMsg[2];
                var UNIT = arrMsg[3];
                var YEAR = arrMsg[4].split(',');

                for (var i = 0; i < YEAR.length; i++) {
                    var option = document.createElement('option');
                    option.value = YEAR[i];
                    option.text = YEAR[i];
                    _select.appendChild(option);
                }
                $('#span_unit').text(UNIT);

                $('#span_level1').text(' ~ ' + TILE[0]);
                for (var i = 0; i < 4; i++) {
                    $('#span_level' + (i + 2)).text(TILE[i] + ' ~ ' + TILE[i + 1]);
                }
                $('#span_level5').text(TILE[3] + ' ~ ');
                country_POLY_for_countryData(YEAR[0],type);
                _select.addEventListener('change', function () {
                	country_POLY_for_countryData(_select.value,type);
                });
                
    			//return;
            }
			$(node.span.childNodes[1]).removeClass('loading');
		}
	});
}


//##################################################################
//###################   以下是Menu中城市功能   ############################
//##################################################################
function country_POLY_for_chinaCity (type){//country_polygen
	//清 country_polygen
	//叫 geom 資料
	//畫 在地圖上
	panTo( 35.0, 100.0);
	smoothZoom(map, 4, map.getZoom());
	var polygen = country_polygen.pop();
	while(polygen != null){
		if (Wkt.isArray(polygen)) {
		       for (i in polygen) {
		           if (polygen.hasOwnProperty(i) && !Wkt.isArray(polygen[i])) {
		           	polygen[i].setMap(null);
		       }
		    }
		} else {
		   	polygen.setMap(null);
		}
		polygen = country_polygen.pop();
	}
	
	
	$.ajax({
		type : "POST",
		url : "chinaCity.do",
		async : false,
		data : {
			action : "change_select",
			//year : year,
			type : type
		},
		success : function(result) {
			var json_obj = $.parseJSON(result);
			$.each(json_obj,function(i, item) {
				//json_obj[i].country_name;
				//json_obj[i].economy_detail_statistic;
				//json_obj[i].geom;
				var wkt = new Wkt.Wkt();
				//var fake = "POLYGON ((121.465 25.0131, 120.646 24.1779, 120.303 22.6228, 121.465 25.0131))";
				//wkt.read(fake);
				//console.log(json_obj[i].geom+" "+i+" "+ json_obj[i].country_name);
				wkt.read(json_obj[i].geom);
	            var config = {
	                fillColor: '#F0F0F0',
	                strokeColor: '#5C5C5C',
	                fillOpacity: 0.7,
	                strokeOpacity: 1,
	                strokeWeight: 1,
	            }
	            var _data = json_obj[i].data;
                switch (true) {
                    case _data <= TILE[0]:
                        config.fillColor = "#41A85F";
                        break;
                    case _data > TILE[0] && _data <= TILE[1]:
                        config.fillColor = "#8db444";
                        break;
                    case _data > TILE[1] && _data <= TILE[2]:
                        config.fillColor = "#FAC51C";
                        break;
                    case _data > TILE[2] && _data <= TILE[3]:
                        config.fillColor = "#d87926";
                        break;
                    case _data > TILE[3]:
                        config.fillColor = "#B8312F";
                        break;
                }
	            var polygen = wkt.toObject(config);
	            if (Wkt.isArray(polygen)) {
	                for (i in polygen) {
	                    if (polygen.hasOwnProperty(i) && !Wkt.isArray(polygen[i])) {
	                    	//alert("array "+i+" : "+polygen[i]);
	                    	polygen[i].setMap(map);
	                    }
	                }
	            } else {
	            	//alert(country_polygen);
	            	polygen.setMap(map);
	            }
				
	            country_polygen.push(polygen);
			});
			
            $("#shpLegend").show();
            var _height = $('#shpLegend div').height();
            if (_height > 0) {
                $('#shpLegend').height(_height);
            }
		}
    });
}

function chinaCity(node,type){//country_economy
	if(!node.isSelected()){//刪刪掉 結束
	 	var polygen = country_polygen.pop();
	 	while(polygen != null){
	 		if (Wkt.isArray(polygen)) {
	 		       for (i in polygen) {
	 		           if (polygen.hasOwnProperty(i) && !Wkt.isArray(polygen[i])) {
	 		           	polygen[i].setMap(null);
	 		       }
	 		    }
	 		} else {
	 		   	polygen.setMap(null);
	 		}
	 		polygen = country_polygen.pop();
	 	}
	 	$("#shpLegend").hide();
	 	return;
	}

	if(!$(node.span.childNodes[1]).hasClass('diagrammap')){
		$(node.span.childNodes[1]).addClass('diagrammap');
	}
	var sibling_node = $('#tree').fancytree('getTree').getSelectedNodes();
	sibling_node.forEach(function(sib_node) {
		if($(sib_node.span).length>0){
			if($(sib_node.span.childNodes[1]).hasClass('diagrammap')){
				sib_node.setSelected(false);
			}
		}
	});
	node.setSelected(true);
	
	
	$(node.span.childNodes[1]).addClass('loading');
	$('#span_legend').text(node.title);
    $('#tr_year').hide();
    //$('#ddl_year').empty();
    //var ddl_year = document.getElementById('ddl_year');
    //var _select = document.createElement('select');
    //ddl_year.appendChild(_select);
	
	$.ajax({
		type : "POST",
		url : "chinaCity.do",
		//async : false,
		data : {
			action : "draw_shpLegend",
			type : type
		},
		success : function(msg) {
			
			if (msg !== undefined) {
                var arrMsg = msg.split('|');

                TILE = arrMsg[0].split(',');
                var MIN = arrMsg[1];
                var MAX = arrMsg[2];
                var UNIT = arrMsg[3];
                //var YEAR = arrMsg[4].split(',');

//                 for (var i = 0; i < YEAR.length; i++) {
//                     var option = document.createElement('option');
//                     option.value = YEAR[i];
//                     option.text = YEAR[i];
//                     _select.appendChild(option);
//                 }
                $('#span_unit').text(UNIT);

                $('#span_level1').text(' ~ ' + TILE[0]);
                for (var i = 0; i < 4; i++) {
                    $('#span_level' + (i + 2)).text(TILE[i] + ' ~ ' + TILE[i + 1]);
                }
                $('#span_level5').text(TILE[3] + ' ~ ');
                country_POLY_for_chinaCity(type);
//                 _select.addEventListener('change', function () {
//                 	country_POLY_for_chinaCity(type);
//                 });
    			//return;
            }
			$(node.span.childNodes[1]).removeClass('loading');
		}
	});
	
}
//##################################################################
//###################   以下是Menu商圈中熱力圖   ###########################
//##################################################################
function country_POLY_for_heatMap (type){//heatMap
	//清 country_polygen
	//叫 geom 資料
	//畫 在地圖上
	//panTo( 35.0, 100.0);
	//smoothZoom(map, 4, map.getZoom());
	var polygen = country_polygen.pop();
	while(polygen != null){
		if (Wkt.isArray(polygen)) {
		       for (i in polygen) {
		           if (polygen.hasOwnProperty(i) && !Wkt.isArray(polygen[i])) {
		           	polygen[i].setMap(null);
		       }
		    }
		} else {
		   	polygen.setMap(null);
		}
		polygen = country_polygen.pop();
	}
	
	
	$.ajax({
		type : "POST",
		url : "heatMap.do",
		async : false,
		data : {
			action : "change_select",
			//year : year,
			type : type
		},
		success : function(result) {
			console.log(result);
			var json_obj = $.parseJSON(result);
			$.each(json_obj,function(i, item) {
				//json_obj[i].country_name;
				//json_obj[i].economy_detail_statistic;
				//json_obj[i].geom;
				var wkt = new Wkt.Wkt();
				//var fake = "POLYGON ((121.465 25.0131, 120.646 24.1779, 120.303 22.6228, 121.465 25.0131))";
				//wkt.read(fake);
				//console.log(json_obj[i].geom+" "+i+" "+ json_obj[i].country_name);
				wkt.read(json_obj[i].geom);
	            var config = {
	                fillColor: '#F0F0F0',
	                strokeColor: '#5C5C5C',
	                fillOpacity: 0.7,
	                strokeOpacity: 1,
	                strokeWeight: 1,
	            }
	            var _data = json_obj[i].data;
                switch (true) {
                    case _data <= TILE[1]:
                        config.fillColor = "#41A85F";
                        break;
                    case _data > TILE[1] && _data <= TILE[2]:
                        config.fillColor = "#8db444";
                        break;
                    case _data > TILE[2] && _data <= TILE[3]:
                        config.fillColor = "#FAC51C";
                        break;
                    case _data > TILE[3] && _data <= TILE[4]:
                        config.fillColor = "#d87926";
                        break;
                    case _data > TILE[4]:
                        config.fillColor = "#B8312F";
                        break;
                }
	            var polygen = wkt.toObject(config);
	            if (Wkt.isArray(polygen)) {
	                for (i in polygen) {
	                    if (polygen.hasOwnProperty(i) && !Wkt.isArray(polygen[i])) {
	                    	//alert("array "+i+" : "+polygen[i]);
	                    	polygen[i].setMap(map);
	                    }
	                }
	            } else {
	            	//alert(country_polygen);
	            	polygen.setMap(map);
	            }
				
	            country_polygen.push(polygen);
			});
			
            $("#shpLegend").show();
            var _height = $('#shpLegend div').height();
            if (_height > 0) {
                $('#shpLegend').height(_height);
            }
		}
    });
}

function heatMap(node,type){//heatMap
	if(!node.isSelected()){//刪刪掉 結束
	 	var polygen = country_polygen.pop();
	 	while(polygen != null){
	 		if (Wkt.isArray(polygen)) {
	 		       for (i in polygen) {
	 		           if (polygen.hasOwnProperty(i) && !Wkt.isArray(polygen[i])) {
	 		           	polygen[i].setMap(null);
	 		       }
	 		    }
	 		} else {
	 		   	polygen.setMap(null);
	 		}
	 		polygen = country_polygen.pop();
	 	}
	 	$("#shpLegend").hide();
	 	return;
	}
// 	$('#tree').fancytree('getTree').getSelectedNodes().visit( function(sibling_node){
	if(!$(node.span.childNodes[1]).hasClass('heatmap')){
		$(node.span.childNodes[1]).addClass('heatmap');
	}
	var sibling_node = $('#tree').fancytree('getTree').getSelectedNodes();
	sibling_node.forEach(function(sib_node) {
		if($(sib_node.span).length>0){
			if($(sib_node.span.childNodes[1]).hasClass('heatmap')){
				sib_node.setSelected(false);
			}
		}
	});
// 	$("#tree").fancytree("getTree").getNodeByKey('4').visit(function(sibling_node){
// 		if($(sibling_node.span).length>0){
// // 			alert("in"+sibling_node.key+" "+$(sibling_node.span.childNodes[1]).hasClass('heatmap'));
// 			if($(sibling_node.span.childNodes[1]).hasClass('heatmap')){
// 				alert(sibling_node.key);
// 				sibling_node.setSelected(false);
// 			}
// 		}else{
// // 			alert("in"+sibling_node.key);
// 		}
// 	});
	node.setSelected(true);
	$(node.span.childNodes[1]).addClass('loading');
	$('#span_legend').text(node.title);
    $('#tr_year').hide();
    //$('#ddl_year').empty();
    //var ddl_year = document.getElementById('ddl_year');
    //var _select = document.createElement('select');
    //ddl_year.appendChild(_select);
	
	$.ajax({
		type : "POST",
		url : "heatMap.do",
		//async : false,
		data : {
			action : "draw_shpLegend",
			type : type
		},
		success : function(msg) {
			
			if (msg !== undefined) {
                var arrMsg = msg.split('|');

                TILE = arrMsg[0].split(',');
                //var MIN = arrMsg[1];
                //var MAX = arrMsg[2];
                var UNIT = arrMsg[3];
                //var YEAR = arrMsg[4].split(',');

//                 for (var i = 0; i < YEAR.length; i++) {
//                     var option = document.createElement('option');
//                     option.value = YEAR[i];
//                     option.text = YEAR[i];
//                     _select.appendChild(option);
//                 }
                $('#span_unit').text("數量");

                //$('#span_level1').text(' ~ ' + TILE[0]);
                for (var i = 0; i < 5; i++) {
                    $('#span_level' + (i + 1)).text(TILE[i] + ' ~ ' + TILE[i + 1]);
                }
                //$('#span_level5').text(TILE[3] + ' ~ ');
                country_POLY_for_heatMap(type);
//                 _select.addEventListener('change', function () {
//                 	country_POLY_for_chinaCity(type);
//                 });
    			//return;
            }
			$(node.span.childNodes[1]).removeClass('loading');
		}
	});
	
}

